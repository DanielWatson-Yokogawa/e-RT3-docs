<!-- 
  /**
 * -------------------------------------------------------------------------
 * Copyright (c) 2021 Yokogawa Technologies Solutions India Pvt. Ltd.
 * 
 * All rights reserved.
 * 
 * Licensed under the MIT License. See LICENSE FILE in the project root for
 * license information.
 * --------------------------------------------------------------------------
 */
 -->

<script type="text/javascript">
  RED.nodes.registerType('readM3IoRegister',{
    category:'m3io',
    color:'#c7e9c0',
    defaults:{
      name:{value:"Slot Name"},
      unit:{value:0},
      slot:{value:1},
      reg:{value:1},
      thr:{value:false},
      ust:{value:0}
    },
    inputs:1,
    outputs:1,
    icon:"trigger.png",
    label:function(){
      return this.name||"readM3IoRegister";
    }
  });
</script>

<script type="text/x-red" data-template-name="readM3IoRegister">
  <div class="form-row">
    <label for="node-input-name"><i class="icon-tag"></i> Name</label>
    <input type="text" id="node-input-name">
  </div>
  <div class="form-row">
    <label for="node-input-unit"> Unit (0-7)</label>
    <input type="text" id="node-input-unit">
  </div>
  <div class="form-row">
    <label for="node-input-slot"> Slot (1-16)</label>
    <input type="text" id="node-input-slot">
  </div>
  <div class="form-row">
    <label for="node-input-reg"> Position (1-)</label>
    <input type="text" id="node-input-reg">
  </div>
  <div class="form-row">
      <label style="width:auto" for="node-input-ust">get value by signed number : </label>
      <input type="checkbox" checked id="node-input-ust" style="display:inline-block; width:auto; vertical-align:top;">
  </div>
  <div class="form-row">
      <label style="width:auto" for="node-input-thr">through <code>msg.register</code> to output: </label>
      <input type="checkbox" checked id="node-input-thr" style="display:inline-block; width:auto; vertical-align:top;">
  </div>
</script>

<script type="text/x-red" data-help-name="readM3IoRegister">
  <p>readM3IoRegister gets word register data from module.
you can change a register no by <code>msg.register</code>. put a data in <code>msg.payload</code>.
put strings "unitno,slotno,regno" in msg.topic.
this node for like ADxx series M3 modules.
<br>
Unit=<code>msg.unit</code>, Slot=<code>msg.slot</code>, Register=<code>msg.register</code>
</p>
</script>
