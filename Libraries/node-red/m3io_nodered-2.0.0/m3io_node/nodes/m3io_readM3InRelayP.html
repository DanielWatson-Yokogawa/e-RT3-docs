<!-- 
  /**
 * -------------------------------------------------------------------------
 * Copyright (c) 2021 Yokogawa Technologies Solutions India Pvt. Ltd.
 * 
 * All rights reserved.
 * 
 * Licensed under the MIT License. See LICENSE FILE in the project root for
 * license information.
 * --------------------------------------------------------------------------
 */
 -->

<script type="text/javascript">
  RED.nodes.registerType('readM3InRelayP',{
    category:'m3io',
    color:'#c7e9c0',
    defaults:{
      name:{value:"Slot Name"},
      unit:{value:0},
      slot:{value:1},
      pos:{value:1},
      thr:{value:false}
    },
    inputs:1,
    outputs:1,
    icon:"trigger.png",
    label:function(){
      return this.name||"readM3InRelayP";
    }
  });
</script>

<script type="text/x-red" data-template-name="readM3InRelayP">
  <div class="form-row">
    <label for="node-input-name"><i class="icon-tag"></i> Name</label>
    <input type="text" id="node-input-name">
  </div>
  <div class="form-row">
    <label for="node-input-unit"> Unit (0-7)</label>
    <input type="text" id="node-input-unit">
  </div>
  <div class="form-row">
    <label for="node-input-slot"> Slot (1-16)</label>
    <input type="text" id="node-input-slot">
  </div>
  <div class="form-row">
    <label for="node-input-pos"> Position (1-)</label>
    <input type="text" id="node-input-pos">
  </div>
  <div class="form-row">
      <label style="width:auto" for="node-input-thr">through <code>msg.position</code> to output: </label>
      <input type="checkbox" checked id="node-input-thr" style="display:inline-block; width:auto; vertical-align:top;">
  </div>
</script>

<script type="text/x-red" data-help-name="readM3InRelayP">
  <p>readM3InRelayP gets On/Off data of relay position.
you can change a position by <code>msg.position</code>. put a data in <code>msg.payload</code>, 1 or 0.
put strings "unitno,slotno,posno" in msg.topic.
this node for like XDxx series M3 modules.
<br /> 
Unit=<code>msg.unit</code>, Slot=<code>msg.slot</code>, Position=<code>msg.position</code>
</p>
</script>
